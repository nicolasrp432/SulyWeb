var e=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,n=(a,r,s)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[r]=s,l=(e,a)=>{for(var r in a||(a={}))i.call(a,r)&&n(e,r,a[r]);if(s)for(var r of s(a))t.call(a,r)&&n(e,r,a[r]);return e},o=(e,s)=>a(e,r(s)),c=(e,a)=>{var r={};for(var n in e)i.call(e,n)&&a.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&s)for(var n of s(e))a.indexOf(n)<0&&t.call(e,n)&&(r[n]=e[n]);return r},d=(e,a,r)=>new Promise((s,i)=>{var t=e=>{try{l(r.next(e))}catch(a){i(a)}},n=e=>{try{l(r.throw(e))}catch(a){i(a)}},l=e=>e.done?s(e.value):Promise.resolve(e.value).then(t,n);l((r=r.apply(e,a)).next())});import{j as m,P as u,T as p,I as x,k as h,l as f,m as g,C as y,n as j,L as v,o as b,p as N,q as w,r as k,s as P,t as C}from"./chunk-660a9970.js";import{r as S}from"./chunk-b06bd742.js";import{H as E}from"./chunk-53cd4001.js";import{c as q,a as M,b as O,s as R,u as D,B as z}from"./index-07bd9f2c.js";import{c as F}from"./chunk-c4165804.js";import{P as A}from"./chunk-bd85fee7.js";import{L as I}from"./chunk-49aa39f8.js";import{C as L}from"./chunk-e2a168cc.js";import"./chunk-46171573.js";import"./chunk-fb64e05f.js";const V=q("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),B=q("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),U=q("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),H=q("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),T=q("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),$=q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),_=S.forwardRef((e,a)=>{var r=e,{className:s,type:i}=r,t=c(r,["className","type"]);return m.jsx("input",l({type:i,className:M("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a},t))});_.displayName="Input";var G=S.forwardRef((e,a)=>m.jsx(u.label,o(l({},e),{ref:a,onMouseDown:a=>{var r;a.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}})));G.displayName="Label";var K=G;const Y=O("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Z=S.forwardRef((e,a)=>{var r=e,{className:s}=r,i=c(r,["className"]);return m.jsx(K,l({ref:a,className:M(Y(),s)},i))});Z.displayName=K.displayName;const J=P,Q=C,W=S.forwardRef((e,a)=>{var r=e,{className:s,children:i}=r,t=c(r,["className","children"]);return m.jsxs(p,o(l({ref:a,className:M("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s)},t),{children:[i,m.jsx(x,{asChild:!0,children:m.jsx(U,{className:"h-4 w-4 opacity-50"})})]}))});W.displayName=p.displayName;const X=S.forwardRef((e,a)=>{var r=e,{className:s}=r,i=c(r,["className"]);return m.jsx(h,o(l({ref:a,className:M("flex cursor-default items-center justify-center py-1",s)},i),{children:m.jsx(H,{className:"h-4 w-4"})}))});X.displayName=h.displayName;const ee=S.forwardRef((e,a)=>{var r=e,{className:s}=r,i=c(r,["className"]);return m.jsx(f,o(l({ref:a,className:M("flex cursor-default items-center justify-center py-1",s)},i),{children:m.jsx(U,{className:"h-4 w-4"})}))});ee.displayName=f.displayName;const ae=S.forwardRef((e,a)=>{var r=e,{className:s,children:i,position:t="popper"}=r,n=c(r,["className","children","position"]);return m.jsx(g,{children:m.jsxs(y,o(l({ref:a,className:M("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t},n),{children:[m.jsx(X,{}),m.jsx(j,{className:M("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),m.jsx(ee,{})]}))})});ae.displayName=y.displayName;S.forwardRef((e,a)=>{var r=e,{className:s}=r,i=c(r,["className"]);return m.jsx(v,l({ref:a,className:M("py-1.5 pl-8 pr-2 text-sm font-semibold",s)},i))}).displayName=v.displayName;const re=S.forwardRef((e,a)=>{var r=e,{className:s,children:i}=r,t=c(r,["className","children"]);return m.jsxs(b,o(l({ref:a,className:M("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s)},t),{children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(N,{children:m.jsx(B,{className:"h-4 w-4"})})}),m.jsx(w,{children:i})]}))});re.displayName=b.displayName;S.forwardRef((e,a)=>{var r=e,{className:s}=r,i=c(r,["className"]);return m.jsx(k,l({ref:a,className:M("-mx-1 my-1 h-px bg-muted",s)},i))}).displayName=k.displayName;const se=[{name:"Cortar + limar",duration:"30 min",price:"9,90€",category:"nails"},{name:"Manicura exprés",duration:"30 min",price:"11,90€",category:"nails"},{name:"Manicura semi exprés",duration:"40 min",price:"14,90€",category:"nails"},{name:"Manicura adicional",duration:"45 min",price:"16,90€",category:"nails"},{name:"Manicura completa spa",duration:"60 min",price:"19,90€",category:"nails"},{name:"Uñas baby boomer",duration:"90 min",price:"38,90€",category:"nails"},{name:"Relleno de acrílico",duration:"60 min",price:"25,00€",category:"nails"},{name:"Esmaltar pies",duration:"30 min",price:"14,90€",category:"nails"},{name:"Pedicura completa",duration:"60 min",price:"25,90€",category:"nails"},{name:"Pedicura completa semi / tradicional",duration:"60 min",price:"25,90€",category:"nails"}];function ie(e=null){return d(this,null,function*(){const a=e||se;try{const e=function(e){return F("https://qeuqspjpwybaxppqgehm.supabase.co",e,{auth:{autoRefreshToken:!1,persistSession:!1}})}(function(){const e=window.prompt('Para añadir servicios necesitas la SERVICE ROLE KEY de Supabase.\n\nPuedes encontrarla en:\n1. Ve a tu dashboard de Supabase\n2. Selecciona tu proyecto\n3. Ve a Settings > API\n4. Copia la "service_role" key (NO la "anon" key)\n\nPega la service role key aquí:');if(!e||""===e.trim())throw new Error("Service role key es requerida para esta operación");return e.trim()}()),r=yield function(){return d(this,null,function*(){try{const{data:e,error:a}=yield R.from("services").select("*").limit(1);return a?null:e&&0!==e.length?e[0]:null}catch(c){return null}})}(),{data:s,error:i}=yield R.from("services").select("id").order("id",{ascending:!1}).limit(1);if(i)throw new Error(`Error al obtener el último ID de servicio: ${i.message}`);let t=!1,n=0;if(s&&s.length>0){const e=s[0].id;"string"==typeof e&&e.includes("-")?t=!0:(n=parseInt(e,10),isNaN(n)&&(n=0))}const l=a.map((e,a)=>{const s={id:t?"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const a=16*Math.random()|0;return("x"==e?a:3&a|8).toString(16)}):n+a+1,name:e.name,slug:(i=e.name,i.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-")),duration:e.duration,price:e.price};var i;return r&&"category"in r?s.category=e.category:r&&"service_category"in r?s.service_category=e.category:r&&"type"in r&&(s.type=e.category),s}),{data:o,error:c}=yield e.from("services").insert(l);if(c)throw new Error(`Error al insertar servicios: ${c.message}`);return{success:!0,message:`Se han añadido ${l.length} servicios correctamente.`}}catch(r){return{success:!1,message:r.message}}})}const te=()=>{const{toast:e}=D(),[a,r]=S.useState(!1),[s,i]=S.useState(null),[t,n]=S.useState([...se,{name:"Paquete Básico",duration:"60 min",price:"35,00€",category:"paquetes"},{name:"Paquete Premium",duration:"180 min",price:"70,00€",category:"paquetes"},{name:"Paquete Deluxe",duration:"165 min",price:"95,00€",category:"paquetes"}]),[c,u]=S.useState(!1),[p,x]=S.useState({name:"",duration:"",price:"",category:"nails"}),h=(e,a,r)=>{const s=[...t];s[e][a]=r,n(s)};return m.jsxs(m.Fragment,{children:[m.jsx(E,{children:m.jsx("title",{children:"Administración de Servicios | Suly Pretty Nails"})}),m.jsxs("section",{className:"container mx-auto py-12 px-4",children:[m.jsx("h1",{className:"text-3xl font-bold mb-8 text-center",children:"Administración de Servicios"}),m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 max-w-4xl mx-auto",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"Gestión de Servicios"}),m.jsxs(z,{onClick:()=>u(!c),variant:"outline",className:"flex items-center gap-2",children:[m.jsx(T,{className:"h-4 w-4"}),c?"Ocultar Editor":"Mostrar Editor"]})]}),c&&m.jsxs("div",{className:"mb-8 p-4 border rounded-lg bg-gray-50",children:[m.jsx("h3",{className:"text-lg font-medium mb-4",children:"Editor de Servicios"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 p-4 bg-white rounded border",children:[m.jsxs("div",{children:[m.jsx(Z,{htmlFor:"new-name",children:"Nombre del Servicio"}),m.jsx(_,{id:"new-name",value:p.name,onChange:e=>x(o(l({},p),{name:e.target.value})),placeholder:"Ej: Manicura completa"})]}),m.jsxs("div",{children:[m.jsx(Z,{htmlFor:"new-duration",children:"Duración"}),m.jsx(_,{id:"new-duration",value:p.duration,onChange:e=>x(o(l({},p),{duration:e.target.value})),placeholder:"Ej: 45 min"})]}),m.jsxs("div",{children:[m.jsx(Z,{htmlFor:"new-price",children:"Precio"}),m.jsx(_,{id:"new-price",value:p.price,onChange:e=>x(o(l({},p),{price:e.target.value})),placeholder:"Ej: 18,00€"})]}),m.jsxs("div",{children:[m.jsx(Z,{htmlFor:"new-category",children:"Categoría"}),m.jsxs(J,{value:p.category,onValueChange:e=>x(o(l({},p),{category:e})),children:[m.jsx(W,{children:m.jsx(Q,{})}),m.jsxs(ae,{children:[m.jsx(re,{value:"nails",children:"Uñas"}),m.jsx(re,{value:"beauty",children:"Belleza"}),m.jsx(re,{value:"paquetes",children:"Paquetes"})]})]})]}),m.jsx("div",{className:"md:col-span-4",children:m.jsxs(z,{onClick:()=>{p.name&&p.duration&&p.price?(n([...t,l({},p)]),x({name:"",duration:"",price:"",category:"nails"}),e({title:"Servicio añadido",description:"El servicio se ha añadido a la lista",duration:3e3})):e({variant:"destructive",title:"Error",description:"Por favor completa todos los campos",duration:3e3})},className:"w-full flex items-center gap-2",children:[m.jsx(A,{className:"h-4 w-4"}),"Añadir Servicio"]})})]}),m.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:t.map((a,r)=>m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 p-3 bg-white rounded border items-end",children:[m.jsxs("div",{children:[m.jsx(Z,{children:"Nombre"}),m.jsx(_,{value:a.name,onChange:e=>h(r,"name",e.target.value)})]}),m.jsxs("div",{children:[m.jsx(Z,{children:"Duración"}),m.jsx(_,{value:a.duration,onChange:e=>h(r,"duration",e.target.value)})]}),m.jsxs("div",{children:[m.jsx(Z,{children:"Precio"}),m.jsx(_,{value:a.price,onChange:e=>h(r,"price",e.target.value)})]}),m.jsxs("div",{children:[m.jsx(Z,{children:"Categoría"}),m.jsxs(J,{value:a.category,onValueChange:e=>h(r,"category",e),children:[m.jsx(W,{children:m.jsx(Q,{})}),m.jsxs(ae,{children:[m.jsx(re,{value:"nails",children:"Uñas"}),m.jsx(re,{value:"beauty",children:"Belleza"}),m.jsx(re,{value:"paquetes",children:"Paquetes"})]})]})]}),m.jsx("div",{children:m.jsx(z,{onClick:()=>(a=>{const r=t.filter((e,r)=>r!==a);n(r),e({title:"Servicio eliminado",description:"El servicio se ha eliminado de la lista",duration:3e3})})(r),variant:"destructive",size:"sm",className:"w-full",children:m.jsx($,{className:"h-4 w-4"})})})]},r))})]}),m.jsxs("p",{className:"mb-4 text-gray-600",children:["Esta herramienta añadirá ",t.length," servicios a la base de datos:"]}),m.jsx("div",{className:"bg-gray-50 p-4 rounded-md mb-6 max-h-60 overflow-y-auto",children:m.jsx("ul",{className:"list-disc pl-5 space-y-2",children:t.map((e,a)=>m.jsxs("li",{className:"text-sm",children:[m.jsx("span",{className:"font-medium",children:e.name})," - ",e.duration," - ",e.price," - Categoría: ",e.category]},a))})}),m.jsx(z,{onClick:()=>d(void 0,null,function*(){r(!0),i(null);try{const a=yield ie(t);i(a),e({variant:a.success?"default":"destructive",title:a.success?"¡Servicios añadidos!":"Error al añadir servicios",description:a.message,duration:5e3})}catch(a){i({success:!1,message:a.message||"Error desconocido"}),e({variant:"destructive",title:"Error inesperado",description:a.message||"Ha ocurrido un error inesperado",duration:5e3})}finally{r(!1)}}),disabled:a,className:"w-full bg-gradient-to-r from-pink-500 to-rose-500 text-white flex items-center justify-center gap-2",children:a?m.jsxs(m.Fragment,{children:[m.jsx(I,{className:"h-4 w-4 animate-spin"}),m.jsx("span",{children:"Añadiendo servicios..."})]}):m.jsx(m.Fragment,{children:m.jsx("span",{children:"Añadir Servicios Faltantes"})})}),s&&m.jsx("div",{className:"mt-6 p-4 rounded-md "+(s.success?"bg-green-50 text-green-800":"bg-red-50 text-red-800"),children:m.jsxs("div",{className:"flex items-center gap-2",children:[s.success?m.jsx(L,{className:"h-5 w-5 text-green-500"}):m.jsx(V,{className:"h-5 w-5 text-red-500"}),m.jsx("p",{className:"font-medium",children:s.message})]})})]})]})]})};export{te as default};
